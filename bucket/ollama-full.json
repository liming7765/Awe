{
    "##": [
        "Scoop manifest for Ollama, a tool to run large language models locally",
        "Stores .ollama folder in install directory",
        "Sets OLLAMA_MODELS environment variable",
        "Backs up .ollama to %USERPROFILE%\\.ollama on uninstall to persist data",
        "autoupdate.hash configured for GitHub SHA256 checksums (verify sha256sum.txt URL and format)"
    ],
    "version": "0.9.2",
    "description": "Run large language models locally with ease",
    "homepage": "https://ollama.com/",
    "license": "MIT",
    "url": "https://github.com/ollama/ollama/releases/download/v0.9.2/OllamaSetup.exe",
    "hash": "sha256:0ae9fbf6443d2599a0081e2afaa97fb3dc828a50b710b1376beef92b0822e7e6",
    "innosetup": true,
    "architecture": {
        "64bit": {
            "pre_install": [
                "# Rename 64-bit files (remove ',1.') and remove ARM64 files (',2.')",
                "# Ensure .ollama folder exists in install directory",
                "Get-ChildItem \"$dir\\*,1.*\" -Recurse | Rename-Item -NewName { $_.FullName -replace ',1\\.', '.' }",
                "Get-ChildItem \"$dir\\*,2.*\" -Recurse | Remove-Item",
                "$ollamaDir = Join-Path $dir '.ollama'",
                "if (!(Test-Path $ollamaDir)) { New-Item $ollamaDir -ItemType Directory -Force | Out-Null }"
            ]
        },
        "arm64": {
            "pre_install": [
                "# Rename ARM64 files (remove ',2.') and remove 64-bit files (',1.')",
                "# Ensure .ollama folder exists in install directory",
                "Get-ChildItem \"$dir\\*,2.*\" -Recurse | Rename-Item -NewName { $_.FullName -replace ',2\\.', '.' }",
                "Get-ChildItem \"$dir\\*,1.*\" -Recurse | Remove-Item",
                "$ollamaDir = Join-Path $dir '.ollama'",
                "if (!(Test-Path $ollamaDir)) { New-Item $ollamaDir -ItemType Directory -Force | Out-Null }"
            ]
        }
    },
    "bin": "ollama.exe",
    "shortcuts": [
        [
            "ollama app.exe",
            "Ollama",
            "",
            "app.ico"
        ]
    ],
    "pre_uninstall": [
        "# Remove OLLAMA_MODELS environment variable",
        "[Environment]::SetEnvironmentVariable('OLLAMA_MODELS', $null, 'User')"
    ],
    "env_set": {
        "OLLAMA_MODELS": "$dir\\.ollama"
    },
    "persist": ".ollama",
    "checkver": {
        "url": "https://api.github.com/repos/ollama/ollama/releases/latest",
        "regex": "\"tag_name\": \"v?([\\d.]+)\""
    },
    "autoupdate": {
        "url": "https://github.com/ollama/ollama/releases/download/v$version/OllamaSetup.exe",
        "hash": {
            "url": "https://github.com/ollama/ollama/releases/download/v$version/sha256sum.txt",
            "regex": "^(\\w+)\\s+OllamaSetup\\.exe$",
            "type": "sha256"
        }
    }
}
